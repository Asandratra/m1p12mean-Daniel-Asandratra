"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[138],{7138:(g,u,i)=>{i.r(u),i.d(u,{ClientRendezVousComponent:()=>h});var o=i(5447),l=i(177),a=i(4341),c=i(8939),e=i(4438),m=i(2910);const p=()=>["/client/demandes-rendez-vous",1];function _(r,E){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"td",7),e.EFF(5),e.k0s(),e.j41(6,"td",10)(7,"form",11),e.bIt("ngSubmit",function(){const s=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.annulerRendezVousById(s._id))}),e.j41(8,"button",12),e.EFF(9,"Annuler"),e.k0s()()()()}if(2&r){const t=E.$implicit;e.R7$(2),e.JRh(e.i5U(3,2,t.dateHeure,"dd/MM/yyyy \xe0 HH:mm")),e.R7$(3),e.SpI("Garage ",t.idGarage.localisation,"")}}let h=(()=>{class r{constructor(t,n){this.rendezVousService=t,this.activatedRoute=n,this.rendezVous=[],this.status=["Actif","Termin\xe9","Annul\xe9"],this.page=0,this.nombreElement=0,this.nombreMaxElement=0,this.pageMax=0}ngOnInit(){this.currentUser=JSON.parse(sessionStorage.getItem("currentUser")),this.activatedRoute.params.subscribe(t=>{this.page=t.page,this.loadRendezVous(this.page)})}loadRendezVous(t){this.rendezVousService.filterRendezVous(t,{idClient:this.currentUser._id,status:{$lt:1}}).subscribe(s=>{this.nombreElement=s.nombreElement,this.nombreMaxElement=s.nombreMaxElement,this.pageMax=s.pageMax,this.rendezVous=s.rendezVous})}annulerRendezVousById(t){this.rendezVousService.updateRendezVous(t,{status:2}).subscribe(s=>{this.activatedRoute.params.subscribe(d=>{this.page=d.page,this.loadRendezVous(this.page)})})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(m.N),e.rXU(o.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-rendez-vous"]],decls:21,vars:5,consts:[[1,"card","d-flex","justify-content-center"],[1,"card-body","col-x1-12"],[1,"mb-4"],[1,"link","link-primary","d-flex","justify-content-end",3,"routerLink"],[1,"card","tbl-card"],[1,"table-responsive"],[1,"table","table-hover","mb-0",2,"font-size","larger"],[1,"text-center"],[1,"d-flex","justify-content-end"],[3,"page","pageMax","url"],[1,"text-end"],[3,"ngSubmit"],["type","submit",1,"btn","btn-danger"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h5",2),e.EFF(3,"Mes Rendez-Vous"),e.k0s(),e.j41(4,"a",3),e.EFF(5,"Voir mes demandes de rendez-vous"),e.k0s(),e.j41(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),e.EFF(12,"DATE RENDEZ-VOUS"),e.k0s(),e.j41(13,"th",7),e.EFF(14,"GARAGE"),e.k0s(),e.nrm(15,"th"),e.k0s()(),e.j41(16,"tbody"),e.Z7z(17,_,10,5,"tr",null,e.fX1),e.k0s()()()(),e.j41(19,"div",8),e.nrm(20,"app-pagination",9),e.k0s()()()),2&n&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(4,p)),e.R7$(13),e.Dyx(s.rendezVous),e.R7$(3),e.Y8G("page",s.page)("pageMax",s.pageMax)("url","/client/rendez-vous"))},dependencies:[o.iI,o.Wk,l.MD,l.vh,a.YN,a.qT,a.cb,a.cV,c.e],encapsulation:2})}}return r})()}}]);