"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[322],{2322:(D,c,s)=>{s.r(c),s.d(c,{ManagerDetailsEmployeeComponent:()=>j});var e=s(4438),m=s(5447),g=s(177),l=s(4341),u=s(7482),h=s(3878),y=s(2525),f=s(1626);let v=(()=>{class n{constructor(t){this.http=t,this.apiURL=`${y.c.apiUrl}/conges`}createConge(t){return this.http.post(this.apiURL,t)}static{this.\u0275fac=function(o){return new(o||n)(e.KVO(f.Qq))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function E(n,d){if(1&n&&(e.j41(0,"li",8),e.EFF(1),e.nI1(2,"number"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI("Salaire : Ar ",e.bMT(2,1,null==t.employee?null:t.employee.salaire[0].montant),"")}}function C(n,d){1&n&&(e.j41(0,"li",8),e.EFF(1,"Pas encore de salaire enregistr\xe9"),e.k0s())}function b(n,d){if(1&n&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}function F(n,d){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s()()),2&n){const t=d.$implicit;e.R7$(2),e.JRh(t.idService.label)}}function M(n,d){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.k0s()()),2&n){const t=d.$implicit;e.R7$(2),e.JRh(e.i5U(3,2,t.debut,"dd/MM/yyyy")),e.R7$(3),e.JRh(e.i5U(6,5,t.fin,"dd/MM/yyyy"))}}let j=(()=>{class n{constructor(t,o,i){this.employeeService=t,this.congeService=o,this.activatedRoute=i,this.errorMessage="",this.congeIntervalle=!1,this.router=(0,e.WQX)(m.Ix),this.servicesDropdownList=[],this.selectedService=[],this.dropdownSettings={}}ngOnInit(){const t=JSON.parse(sessionStorage.getItem("currentUser"));t?this.currentUser=t:this.router.navigateByUrl("manager"),this.activatedRoute.params.subscribe(o=>{this.idEmployee=o.id,this.loadEmployee(this.idEmployee)}),this.servicesDropdownList=[{item_id:1,item_text:"Service 1"},{item_id:2,item_text:"Service 2"},{item_id:3,item_text:"Service 3"},{item_id:4,item_text:"Service 4"},{item_id:5,item_text:"Service 5"}],this.dropdownSettings={singleSelection:!1,idField:"item_id",textField:"item_text",selectAllText:"Tout s\xe9l\xe9ctionner",unSelectAllText:"D\xe9selectionner",itemsShowLimit:5,allowSearchFilter:!0}}switchCongeIntervalle(){this.congeIntervalle=!this.congeIntervalle}loadEmployee(t){this.employeeService.getDetailsEmployeeAsManager(t).subscribe(o=>{this.employee=o})}enregistrerConge(){this.errorMessage="";var t={idEmployee:this.idEmployee,debut:Date,fin:Date};if(this.congeIntervalle)if(this.debutConge&&this.finConge){const o=new Date(this.debutConge);new Date(this.finConge)<o?this.errorMessage="La date de fin de cong\xe9 ne peut pas \xeatre avant la date de d\xe9but":(t.debut=this.debutConge,t.fin=this.finConge,this.congeService.createConge(t).subscribe(r=>{alert("Cong\xe9 enregistr\xe9!"),this.debutConge="",this.finConge="",this.congeIntervalle=!1,this.loadEmployee(this.idEmployee)},r=>{this.errorMessage=r.message}))}else this.errorMessage="Veillez bien sp\xe9cifier les dates de cong\xe9";else this.debutConge?(t.debut=this.debutConge,t.fin=this.debutConge,this.congeService.createConge(t).subscribe(o=>{alert("Cong\xe9 enregistr\xe9!"),this.debutConge="",this.finConge="",this.loadEmployee(this.idEmployee),this.loadEmployee(this.idEmployee)},o=>{this.errorMessage=o.message})):this.errorMessage="Veillez bien sp\xe9cifier le jour de cong\xe9"}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(h.O),e.rXU(v),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-manager-details-employee"]],decls:70,vars:9,consts:[["createCongeForn","ngForm"],[1,"card","d-flex","justify-content-center"],[1,"card-body","col-x1-12"],[1,"mb-4"],[1,"row"],[1,"col-sm-7"],[1,"card"],[1,"list-group","list-group-flush",2,"font-size","larger"],[1,"list-group-item"],[1,"col-sm-5"],[1,"card-body"],[1,"card-title"],[1,"text","text-danger"],[3,"ngSubmit"],["type","checkbox",3,"change"],[1,"form-group"],["type","date","id","debut","name","debut",1,"form-control",3,"ngModelChange","ngModel"],["type","date","id","fin","name","fin",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","text-end"],[1,"col-sm-6"],[1,"card","tbl-card"],[1,"table-responsive"],[1,"table","table-hover","mb-0",2,"font-size","larger"]],template:function(o,i){if(1&o){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h5",3),e.EFF(3,"Profil M\xe9canicien"),e.k0s(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"ul",7)(8,"li",8),e.EFF(9),e.k0s(),e.j41(10,"li",8),e.EFF(11),e.k0s(),e.j41(12,"li",8),e.EFF(13),e.k0s(),e.DNE(14,E,3,3,"li",8)(15,C,2,0,"li",8),e.k0s()()(),e.j41(16,"div",9)(17,"div",6)(18,"div",10)(19,"h5",11),e.EFF(20,"Enregistrer cong\xe9"),e.k0s(),e.DNE(21,b,2,1,"p",12),e.j41(22,"form",13,0),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(i.enregistrerConge())}),e.j41(24,"div")(25,"input",14),e.bIt("change",function(){return e.eBV(r),e.Njj(i.switchCongeIntervalle())}),e.k0s(),e.j41(26,"label"),e.EFF(27," Plusieurs jours"),e.k0s()(),e.j41(28,"div",15)(29,"label"),e.EFF(30,"Date de cong\xe9"),e.k0s(),e.j41(31,"input",16),e.mxI("ngModelChange",function(a){return e.eBV(r),e.DH7(i.debutConge,a)||(i.debutConge=a),e.Njj(a)}),e.k0s()(),e.j41(32,"div",15)(33,"label"),e.EFF(34,"Jusqu'au"),e.k0s(),e.j41(35,"input",17),e.mxI("ngModelChange",function(a){return e.eBV(r),e.DH7(i.finConge,a)||(i.finConge=a),e.Njj(a)}),e.k0s()(),e.j41(36,"div",18)(37,"button",19),e.EFF(38,"Enregistrer"),e.k0s()()()()()()()(),e.j41(39,"div",2)(40,"div",4)(41,"div",20)(42,"h5",3),e.EFF(43,"Sp\xe9cialit\xe9(s)"),e.k0s(),e.j41(44,"div",21)(45,"div",22)(46,"table",23)(47,"thead")(48,"tr")(49,"th"),e.EFF(50,"SERVICE"),e.k0s()()(),e.j41(51,"tbody"),e.Z7z(52,F,3,1,"tr",null,e.fX1),e.k0s()()()()(),e.j41(54,"div",20)(55,"div",4)(56,"h5",3),e.EFF(57,"Cong\xe9s"),e.k0s()(),e.j41(58,"div",21)(59,"div",22)(60,"table",23)(61,"thead")(62,"tr")(63,"th"),e.EFF(64,"DU"),e.k0s(),e.j41(65,"th"),e.EFF(66,"AU"),e.k0s()()(),e.j41(67,"tbody"),e.Z7z(68,M,7,8,"tr",null,e.fX1),e.k0s()()()()()()()()}2&o&&(e.R7$(9),e.Lme("Nom : ",null==i.employee?null:i.employee.nom," ",null==i.employee?null:i.employee.prenom,""),e.R7$(2),e.SpI("Tel. : ",null==i.employee?null:i.employee.tel,""),e.R7$(2),e.SpI("R\xf4le : ",null==i.employee?null:i.employee.idRole.label,""),e.R7$(),e.vxM(null!=i.employee&&i.employee.salaire[0]?14:15),e.R7$(7),e.vxM(i.errorMessage?21:-1),e.R7$(10),e.R50("ngModel",i.debutConge),e.R7$(4),e.R50("ngModel",i.finConge),e.Y8G("disabled",!i.congeIntervalle),e.R7$(17),e.Dyx(null==i.employee?null:i.employee.specialities),e.R7$(16),e.Dyx(null==i.employee?null:i.employee.conges))},dependencies:[m.iI,g.MD,g.QX,g.vh,l.YN,l.qT,l.me,l.BC,l.cb,l.vS,l.cV,u.O],encapsulation:2})}}return n})()}}]);