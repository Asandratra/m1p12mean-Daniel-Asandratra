"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[50],{1669:(g,o,r)=>{r.r(o),r.d(o,{ManagerDemandesRendezVousComponent:()=>E});var e=r(4438),i=r(5447),m=r(177),d=r(4341),u=r(8939),l=r(6961);const _=a=>["/manager/valider-demande",a];function p(a,c){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"form",9),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG().$implicit,R=e.XpG();return e.Njj(R.refusDemandeRDV(s._id))}),e.j41(2,"button",10),e.EFF(3,"Refuser"),e.k0s()()(),e.j41(4,"td")(5,"a",11),e.EFF(6,"Voir"),e.k0s()()}if(2&a){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("routerLink",e.eq3(1,_,t._id))}}function D(a,c){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"td",6),e.EFF(5),e.k0s(),e.j41(6,"td",6),e.EFF(7),e.k0s(),e.j41(8,"td",6),e.EFF(9),e.k0s(),e.DNE(10,p,7,3),e.k0s()),2&a){const t=c.$implicit,n=e.XpG();e.R7$(2),e.JRh(e.i5U(3,6,t.dateHeure,"dd/MM/yyyy \xe0 HH:mm")),e.R7$(3),e.Lme("",t.idClient.nom," ",t.idClient.prenom,""),e.R7$(2),e.JRh(t.idClient.tel),e.R7$(2),e.JRh(n.status[t.status]),e.R7$(),e.vxM(t.status<1?10:-1)}}let E=(()=>{class a{constructor(t,n){this.demandeRDVService=t,this.activatedRoute=n,this.status=["En attente","En confirmation","Confirm\xe9e","Refus\xe9e"],this.page=0,this.nombreElement=0,this.nombreMaxElement=0,this.pageMax=0,this.router=(0,e.WQX)(i.Ix)}ngOnInit(){const t=JSON.parse(sessionStorage.getItem("currentUser"));t?this.currentUser=t:this.router.navigateByUrl("manager"),this.activatedRoute.params.subscribe(n=>{this.page=n.page,this.loadDemandesRDV(this.page)})}loadDemandesRDV(t){this.demandeRDVService.filterDemandesRDV(t,{idGarage:this.currentUser.idGarage._id,status:{$lt:2}}).subscribe(s=>{this.nombreElement=s.nombreElement,this.nombreMaxElement=s.nombreMaxElement,this.pageMax=s.pageMax,this.demandesRDV=s.demandesRDV})}refusDemandeRDV(t){this.demandeRDVService.updateDemandeRDV(t,{status:4}).subscribe(s=>{alert("Demande de rendez-vous refus\xe9e"),this.loadDemandesRDV(this.page)})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(l.y),e.rXU(i.nX))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-manager-demandes-rendez-vous"]],decls:24,vars:3,consts:[[1,"card","d-flex","justify-content-center"],[1,"card-body","col-x1-12"],[1,"mb-4"],[1,"card","tbl-card"],[1,"table-responsive"],[1,"table","table-hover","mb-0",2,"font-size","larger"],[1,"text-center"],[1,"d-flex","justify-content-end"],[3,"page","pageMax","url"],[3,"ngSubmit"],["type","submit",1,"btn","btn-danger"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h5",2),e.EFF(3,"Les Demandes de Rendez-Vous"),e.k0s(),e.j41(4,"div",3)(5,"div",4)(6,"table",5)(7,"thead")(8,"tr")(9,"th"),e.EFF(10,"DATE DEMANDEE"),e.k0s(),e.j41(11,"th",6),e.EFF(12,"CLIENT"),e.k0s(),e.j41(13,"th",6),e.EFF(14,"TEL. CLIENT"),e.k0s(),e.j41(15,"th",6),e.EFF(16,"ETAT"),e.k0s(),e.nrm(17,"th")(18,"th"),e.k0s()(),e.j41(19,"tbody"),e.Z7z(20,D,11,9,"tr",null,e.fX1),e.k0s()()()(),e.j41(22,"div",7),e.nrm(23,"app-pagination",8),e.k0s()()()),2&n&&(e.R7$(20),e.Dyx(s.demandesRDV),e.R7$(3),e.Y8G("page",s.page)("pageMax",s.pageMax)("url","/manager/demandes-rendez-vous"))},dependencies:[i.iI,i.Wk,m.MD,m.vh,d.YN,d.qT,d.cb,d.cV,u.e],encapsulation:2})}}return a})()}}]);