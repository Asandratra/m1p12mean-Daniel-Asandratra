"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[576],{576:(v,u,s)=>{s.r(u),s.d(u,{ClientDetailsGarageComponent:()=>h});var e=s(4438),m=s(177),o=s(5447),n=s(4341),g=s(6183),c=s(6961);function _(i,D){if(1&i&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.JRh(a.errorMessage)}}let h=(()=>{class i{constructor(a,t,r){this.garageService=a,this.demandeRDVService=t,this.activatedRoute=r,this.errorMessage="",this.dateHeure="",this.status=0,this.router=(0,e.WQX)(o.Ix)}ngOnInit(){const a=JSON.parse(sessionStorage.getItem("currentUser"));a?this.currentUser=a:this.router.navigateByUrl("client"),this.activatedRoute.params.subscribe(t=>{this.loadGarageByIdAsClient(t.id)})}loadGarageByIdAsClient(a){this.garageService.getGarageByIdAsClient(a).subscribe(t=>{this.garage=t,this.manager=t.employees[0]},t=>{})}createDemandeRDV(){this.errorMessage="",this.dateHeure?this.demandeRDVService.addDemandeRDV({idClient:this.currentUser._id,idGarage:this.garage._id,dateHeure:this.dateHeure,status:0}).subscribe(t=>{alert("Demande de rendez-vous envoy\xe9e."),this.dateHeure=""},t=>{this.errorMessage="La demande n'a pas pu \xeatre envoy\xe9e !"}):this.errorMessage="Veuillez bien sp\xe9cifier la date \xe0 laquelle vous souhaitez prendre rendez-vous."}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(g.h),e.rXU(c.y),e.rXU(o.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-details-garage"]],decls:32,vars:7,consts:[["demandeRDVForm","ngForm"],[1,"card","d-flex","justify-content-center"],[1,"card-body","col-x1-12"],[1,"mb-4"],[1,"row"],[1,"col-sm-7"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"list-group","list-group-flush",2,"font-size","larger"],[1,"list-group-item"],[1,"col-sm-5"],[1,"text","text-danger"],[3,"ngSubmit"],[1,"form-group"],["for","date-heure"],["type","datetime-local","id","date-heure","name","date-heure","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","emailHelp",1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","text-end",3,"disabled"]],template:function(t,r){if(1&t){const d=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h5",3),e.EFF(3),e.k0s(),e.j41(4,"div")(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5",8),e.EFF(10,"Manager"),e.k0s(),e.j41(11,"ul",9)(12,"li",10),e.EFF(13),e.k0s(),e.j41(14,"li",10),e.EFF(15),e.k0s()()()()(),e.j41(16,"div",11)(17,"div",6)(18,"div",7)(19,"h5",8),e.EFF(20,"Envoyer une demande de rendez-vous"),e.k0s(),e.DNE(21,_,2,1,"p",12),e.j41(22,"form",13,0),e.bIt("ngSubmit",function(){return e.eBV(d),e.Njj(r.createDemandeRDV())}),e.j41(24,"div",14)(25,"label",15),e.EFF(26,"Date demand\xe9e"),e.k0s(),e.j41(27,"input",16),e.mxI("ngModelChange",function(l){return e.eBV(d),e.DH7(r.dateHeure,l)||(r.dateHeure=l),e.Njj(l)}),e.k0s(),e.j41(28,"small",17),e.EFF(29,"Cette date peut encore \xeatre modifi\xe9e par le Manager."),e.k0s()(),e.j41(30,"button",18),e.EFF(31,"Envoyer"),e.k0s()()()()()()()()()}if(2&t){const d=e.sdS(23);e.R7$(3),e.SpI("Garage ",r.garage.localisation,""),e.R7$(10),e.Lme("Nom : ",r.manager.nom," ",r.manager.prenom,""),e.R7$(2),e.SpI("Tel. : ",r.manager.tel,""),e.R7$(6),e.vxM(r.errorMessage?21:-1),e.R7$(6),e.R50("ngModel",r.dateHeure),e.R7$(3),e.Y8G("disabled",d.invalid)}},dependencies:[m.MD,o.iI,n.YN,n.qT,n.me,n.BC,n.cb,n.YS,n.vS,n.cV],encapsulation:2})}}return i})()}}]);