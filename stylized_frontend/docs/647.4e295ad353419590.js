"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[647],{647:(v,c,a)=>{a.r(c),a.d(c,{MecanicRegisterComponent:()=>j});var n=a(4438),m=a(5447),d=a(177),r=a(4341),f=a(5473),h=a(3878),u=a(6183),M=a(2525),C=a(1626);let _=(()=>{class i{constructor(o){this.httpClient=o,this.apiUrl=`${M.c.apiUrl}/roles`}getAllRoles(){return this.httpClient.get(`${this.apiUrl}`)}static{this.\u0275fac=function(g){return new(g||i)(n.KVO(C.Qq))}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function P(i,p){return this.garages}const I=()=>["/employee/login"];function R(i,p){if(1&i&&(n.j41(0,"p",12),n.EFF(1),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.JRh(o.errorMessage)}}function b(i,p){if(1&i&&(n.j41(0,"option",23),n.EFF(1),n.k0s()),2&i){const o=p.$implicit;n.Y8G("value",o._id),n.R7$(),n.JRh(o.label)}}function O(i,p){if(1&i&&(n.j41(0,"option",23),n.EFF(1),n.k0s()),2&i){const o=p.$implicit;n.Y8G("value",o._id),n.R7$(),n.JRh(o.localisation)}}let j=(()=>{class i{constructor(o,g,t){this.employeeService=o,this.garageService=g,this.roleService=t,this.signinInfo={username:"",nom:"",prenom:"",tel:"",idRole:"",idGarage:"",motdepasse:"",secondMotDePasse:""},this.errorMessage="",this.router=(0,n.WQX)(m.Ix)}ngOnInit(){sessionStorage.clear(),this.loadGarages(),this.loadRoles()}loadGarages(){this.garageService.getAllGarages().subscribe(o=>{this.garages=o})}loadRoles(){this.roleService.getAllRoles().subscribe(o=>{this.roles=o})}signin(){this.errorMessage="",this.signinInfo.username&&this.signinInfo.nom&&this.signinInfo.prenom&&this.signinInfo.tel&&this.signinInfo.idGarage&&this.signinInfo.idRole&&this.signinInfo.motdepasse&&this.signinInfo.secondMotDePasse&&this.employeeService.signinEmployee(this.signinInfo).subscribe(o=>{alert("Inscription valid\xe9e!"),this.router.navigateByUrl("employee/login")},o=>{this.errorMessage=o.message}),this.signinInfo.username="",this.signinInfo.nom="",this.signinInfo.prenom="",this.signinInfo.tel="",this.signinInfo.idGarage="",this.signinInfo.idRole="",this.signinInfo.motdepasse="",this.signinInfo.secondMotDePasse=""}static{this.\u0275fac=function(g){return new(g||i)(n.rXU(h.O),n.rXU(u.h),n.rXU(_))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["app-mecanic-register"]],decls:57,vars:12,consts:[["signinEmployeeForm","ngForm"],[1,"auth-main"],[1,"auth-wrapper","v3"],[1,"auth-form"],[1,"auth-header"],[1,"card","my-5"],[3,"ngSubmit"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-end","mb-4"],[1,"mb-0"],[1,"link-primary",3,"routerLink"],[1,"form-group","mb-3"],[1,"text","text-danger"],["for","username",1,"form-label"],["type","text","id","username","name","username","placeholder","Un pseudo unique","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","nom",1,"form-label"],["type","text","id","nom","name","nom","placeholder","Exemple : Rakotoson","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","prenom",1,"form-label"],["type","text","id","prenom","name","prenom","placeholder","Exemple : Johary","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","tel",1,"form-label"],["type","text","id","tel","name","tel","placeholder","Exemple : 0387295624","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","role",1,"form-label"],["id","role","name","role","aria-label","Designation de role",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["for","garage",1,"form-label"],["id","garage","name","garage","aria-label","Designation du Garage",1,"form-select",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["id","password","name","password","type","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","confirm-password",1,"form-label"],["id","confirm-password","name","confirm-password","type","password","placeholder","R\xe9p\xe9tez le mot de passe","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(g,t){if(1&g){const s=n.RV6();n.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),n.EFF(5,"E-Garage"),n.k0s()(),n.j41(6,"div",5)(7,"form",6,0),n.bIt("ngSubmit",function(){return n.eBV(s),n.Njj(t.signin())}),n.j41(9,"div",7)(10,"div",8)(11,"h3",9)(12,"b"),n.EFF(13,"Nouveau M\xe9canicien"),n.k0s()(),n.j41(14,"a",10),n.EFF(15,"Se connecter"),n.k0s()(),n.j41(16,"div",11),n.DNE(17,R,2,1,"p",12),n.j41(18,"label",13),n.EFF(19,"Username"),n.k0s(),n.j41(20,"input",14),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.username,e)||(t.signinInfo.username=e),n.Njj(e)}),n.k0s()(),n.j41(21,"div",11)(22,"label",15),n.EFF(23,"Nom"),n.k0s(),n.j41(24,"input",16),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.nom,e)||(t.signinInfo.nom=e),n.Njj(e)}),n.k0s()(),n.j41(25,"div",11)(26,"label",17),n.EFF(27,"Prenom"),n.k0s(),n.j41(28,"input",18),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.prenom,e)||(t.signinInfo.prenom=e),n.Njj(e)}),n.k0s()(),n.j41(29,"div",11)(30,"label",19),n.EFF(31,"Num\xe9ro Tel"),n.k0s(),n.j41(32,"input",20),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.tel,e)||(t.signinInfo.tel=e),n.Njj(e)}),n.k0s()(),n.j41(33,"div",11)(34,"label",21),n.EFF(35,"Role"),n.k0s(),n.j41(36,"select",22),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.idRole,e)||(t.signinInfo.idRole=e),n.Njj(e)}),n.Z7z(37,b,2,2,"option",23,n.fX1),n.k0s()(),n.j41(39,"div",11)(40,"label",24),n.EFF(41,"Garage"),n.k0s(),n.j41(42,"select",25),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.idGarage,e)||(t.signinInfo.idGarage=e),n.Njj(e)}),n.Z7z(43,O,2,2,"option",23,P,!0),n.k0s()(),n.j41(45,"div",11)(46,"label",26),n.EFF(47,"Mot de passe"),n.k0s(),n.j41(48,"input",27),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.motdepasse,e)||(t.signinInfo.motdepasse=e),n.Njj(e)}),n.k0s()(),n.j41(49,"div",11)(50,"label",28),n.EFF(51,"Confirmez mot de passe"),n.k0s(),n.j41(52,"input",29),n.mxI("ngModelChange",function(e){return n.eBV(s),n.DH7(t.signinInfo.secondMotDePasse,e)||(t.signinInfo.secondMotDePasse=e),n.Njj(e)}),n.k0s()(),n.j41(53,"div",30)(54,"button",31),n.EFF(55,"S'inscrire"),n.k0s()()()()(),n.nrm(56,"app-footer"),n.k0s()()()}if(2&g){const s=n.sdS(8);n.R7$(14),n.Y8G("routerLink",n.lJ4(11,I)),n.R7$(3),n.vxM(t.errorMessage?17:-1),n.R7$(3),n.R50("ngModel",t.signinInfo.username),n.R7$(4),n.R50("ngModel",t.signinInfo.nom),n.R7$(4),n.R50("ngModel",t.signinInfo.prenom),n.R7$(4),n.R50("ngModel",t.signinInfo.tel),n.R7$(4),n.R50("ngModel",t.signinInfo.idRole),n.R7$(),n.Dyx(t.roles),n.R7$(5),n.R50("ngModel",t.signinInfo.idGarage),n.R7$(),n.Dyx(t.garages),n.R7$(5),n.R50("ngModel",t.signinInfo.motdepasse),n.R7$(4),n.R50("ngModel",t.signinInfo.secondMotDePasse),n.R7$(2),n.Y8G("disabled",s.invalid)}},dependencies:[m.iI,m.Wk,d.MD,r.YN,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.YS,r.vS,r.cV,f.n],styles:['.auth-main[_ngcontent-%COMP%]{position:relative}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]{height:100%;width:100%;min-height:100vh}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .saprator[_ngcontent-%COMP%]{position:relative;display:flex;align-self:center;justify-content:center}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .saprator[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:0;width:100%;height:1px;background:var(--bs-border-color);z-index:1}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .saprator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;padding:8px 24px;background:#fff;z-index:5;text-transform:capitalize;color:#262626;font-weight:500}.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]{display:flex;align-items:center}.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]{flex-direction:column;min-height:100vh;padding:24px;background-repeat:no-repeat;background-size:auto 82%;background-position:left bottom;position:relative;justify-content:space-between}.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:5}.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#fff3;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px)}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-grow:1}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;max-width:495px;box-shadow:none}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{padding-left:15px}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline}.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%], .auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}form[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin:0 -12px 0 0;cursor:pointer;padding:12px;font-size:18px;position:absolute;top:203px;right:45px}']})}}return i})()}}]);