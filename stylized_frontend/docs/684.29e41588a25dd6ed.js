"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[684],{7684:(v,m,i)=>{i.r(m),i.d(m,{ManagerRendezVousComponent:()=>R});var e=i(4438),o=i(5447),c=i(177),u=i(4341),_=i(8939),l=i(2910);const p=()=>["/manager/demandes-rendez-vous",1];function g(r,d){if(1&r){const t=e.RV6();e.j41(0,"td",10)(1,"form",11),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG().$implicit,a=e.XpG();return e.Njj(a.creerTravailDepuisRendezVous(a.json.stringify(s.idClient)))}),e.j41(2,"button",13),e.EFF(3,"Cr\xe9er Travail"),e.k0s()()()}}function h(r,d){if(1&r){const t=e.RV6();e.j41(0,"td",10)(1,"form",11),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG().$implicit,a=e.XpG();return e.Njj(a.terminerRendezVousById(s._id))}),e.j41(2,"button",13),e.EFF(3,"Terminer"),e.k0s()()()}}function E(r,d){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"td",7),e.EFF(5),e.k0s(),e.j41(6,"td",7),e.EFF(7),e.k0s(),e.j41(8,"td",7),e.EFF(9),e.k0s(),e.j41(10,"td",10)(11,"form",11),e.bIt("ngSubmit",function(){const s=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.annulerRendezVousById(s._id))}),e.j41(12,"button",12),e.EFF(13,"Supprimer"),e.k0s()()(),e.DNE(14,g,4,0,"td",10)(15,h,4,0,"td",10),e.k0s()}if(2&r){const t=d.$implicit,n=e.XpG();e.R7$(2),e.JRh(e.i5U(3,6,t.dateHeure,"dd/MM/yyyy \xe0 HH:mm")),e.R7$(3),e.Lme("",t.idClient.nom," ",t.idClient.prenom,""),e.R7$(2),e.JRh(t.idClient.tel),e.R7$(2),e.JRh(n.status[t.status]),e.R7$(5),e.vxM(1==t.status?14:15)}}let R=(()=>{class r{constructor(t,n){this.rendezVousService=t,this.activatedRoute=n,this.json=JSON,this.router=(0,e.WQX)(o.Ix),this.rendezVous=[],this.status=["Actif","Termin\xe9","Annul\xe9"],this.page=1,this.nombreElement=0,this.nombreMaxElement=0,this.pageMax=1}ngOnInit(){this.currentUser=JSON.parse(sessionStorage.getItem("currentUser")),this.activatedRoute.params.subscribe(t=>{this.page=t.page,this.loadRendezVous(this.page)})}loadRendezVous(t){this.rendezVousService.filterRendezVous(t,{idGarage:this.currentUser.idGarage._id,status:{$lt:2}}).subscribe(s=>{this.nombreElement=s.nombreElement,this.nombreMaxElement=s.nombreMaxElement,this.pageMax=s.pageMax,this.rendezVous=s.rendezVous})}creerTravailDepuisRendezVous(t){sessionStorage.setItem("clientDeTravail",t),this.router.navigateByUrl("manager/creer-travail")}terminerRendezVousById(t){this.rendezVousService.updateRendezVous(t,{status:1}).subscribe(s=>{this.activatedRoute.params.subscribe(a=>{this.page=a.page,this.loadRendezVous(this.page)})})}annulerRendezVousById(t){this.rendezVousService.updateRendezVous(t,{status:2}).subscribe(s=>{this.activatedRoute.params.subscribe(a=>{this.page=a.page,this.loadRendezVous(this.page)})})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(l.N),e.rXU(o.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-manager-rendez-vous"]],decls:26,vars:5,consts:[[1,"card","d-flex","justify-content-center"],[1,"card-body","col-x1-12"],[1,"mb-4"],[1,"link","link-primary","d-flex","justify-content-end",3,"routerLink"],[1,"card","tbl-card"],[1,"table-responsive"],[1,"table","table-hover","mb-0",2,"font-size","larger"],[1,"text-center"],[1,"d-flex","justify-content-end"],[3,"page","pageMax","url"],[1,"text-end"],[3,"ngSubmit"],["type","submit",1,"btn","btn-danger"],["type","submit",1,"btn","btn-primary"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h5",2),e.EFF(3,"Les Rendez-Vous"),e.k0s(),e.j41(4,"a",3),e.EFF(5,"Demandes de rendez-vous"),e.k0s(),e.j41(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),e.EFF(12,"DATE DE RENDEZ-VOUS"),e.k0s(),e.j41(13,"th",7),e.EFF(14,"CLIENT"),e.k0s(),e.j41(15,"th",7),e.EFF(16,"TEL. CLIENT"),e.k0s(),e.j41(17,"th",7),e.EFF(18,"ETAT"),e.k0s(),e.nrm(19,"th")(20,"th"),e.k0s()(),e.j41(21,"tbody"),e.Z7z(22,E,16,9,"tr",null,e.fX1),e.k0s()()()(),e.j41(24,"div",8),e.nrm(25,"app-pagination",9),e.k0s()()()),2&n&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(4,p)),e.R7$(18),e.Dyx(s.rendezVous),e.R7$(3),e.Y8G("page",s.page)("pageMax",s.pageMax)("url","/manager/rendez-vous"))},dependencies:[o.iI,o.Wk,c.MD,c.vh,u.YN,u.qT,u.cb,u.cV,_.e],encapsulation:2})}}return r})()}}]);