<div class="card d-flex justify-content-center">
    <div class="card-body col-x1-12">
        <h5 class="mb-4">Nouveau Travail</h5>
        @if (errorMessage) {
            <p class="text text-danger">{{errorMessage}}</p>
        }
        <div class="tbl-card">
            <form (ngSubmit)="createTravail()" #createTravailForm="ngForm">
                <div class="row">
                    <div class="col-sm-5">
                        @if (errorMessage) {
                          <p class="text text-danger">{{errorMessage}}</p>
                        }
                        <div class="form-group mb-3">
                          <label for="role">Client</label>
                          <select class="form-select" id="client" name="client" aria-label="Selection du client" [(ngModel)]="idClient">
                            @for (client of clients; track client) {
                                @if (idClient && client._id.toString()==idClient.toString()){
                                    <option [value]="client._id" selected>{{ client.nom }} {{ client.prenom }}</option>
                                }
                                @else {
                                    <option [value]="client._id">{{ client.nom }} {{ client.prenom }}</option>
                                }
                            }
                          </select>
                        </div>
                        <div class="form-group">
                            <label for="matricule">Matricule du vehicule</label>
                            <input
                              type="text"
                              class="form-control"
                              id="matricule"
                              placeholder="exemple: 1234 TA"
                              name="matricule"
                              [(ngModel)]="matricule"
                            >
                        </div>
                        <div class="form-group">
                            <label for="debut">Date de début</label>
                            <input
                                type="datetime-local"
                                class="form-control"
                                id="debut"
                                name="debut"
                                [(ngModel)]="debutTravail"
                            />
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="form-group">
                        <label for="exampleFormControlSelect2">Services à effectuer</label>
                            <ng-multiselect-dropdown
                                [placeholder]="'Services'"
                                [settings]="dropdownSettings"
                                [data]="servicesDropdownList"
                                [(ngModel)]="selectedService"
                                id="services"
                                name="services"
                                >
                            </ng-multiselect-dropdown>
                        </div>
                        <div class="form-group">
                        <label for="exampleFormControlSelect2">Mecaniciens à affilier</label>
                            <ng-multiselect-dropdown
                                [placeholder]="'Mecaniciens'"
                                [settings]="dropdownSettings"
                                [data]="mecanicienDropdownList"
                                [(ngModel)]="selectedMecanicien"
                                id="employees"
                                name="employees"
                                >
                            </ng-multiselect-dropdown>
                        </div>
                    </div>
                </div>
                <div class="d-flex">
                    <button class="btn btn-primary" type="submit">Valider</button>
                </div>
            </form>
        </div>
    </div>
</div>
